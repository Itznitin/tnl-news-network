'use client';
import Link from 'next/link'; import { motion } from 'framer-motion'; import { FiBookmark, FiArrowRight } from 'react-icons/fi'; import { useState, useEffect } from 'react';
export default function ArticleCard({ article }:{article:any}){ const slug=encodeURIComponent(Buffer.from(article.url).toString('base64')); const [saved,setSaved]=useState(false); useEffect(()=>{ try{ const arr=JSON.parse(localStorage.getItem('tnl_bookmarks')||'[]'); setSaved(arr.some((a:any)=>a.url===article.url)) }catch(e){} },[article.url]); function toggleSave(e:any){ e.preventDefault(); e.stopPropagation(); try{ const arr=JSON.parse(localStorage.getItem('tnl_bookmarks')||'[]'); if(arr.some((a:any)=>a.url===article.url)){ const filtered=arr.filter((a:any)=>a.url!==article.url); localStorage.setItem('tnl_bookmarks', JSON.stringify(filtered)); setSaved(false) } else { arr.unshift(article); localStorage.setItem('tnl_bookmarks', JSON.stringify(arr)); setSaved(true) } }catch(e){} } return (<motion.article initial={{ opacity: 0, y: 10 }} animate={{ opacity: 1, y: 0 }} transition={{ duration: 0.45 }} className="bg-white dark:bg-slate-800 rounded-lg overflow-hidden card-hover"><Link href={`/article/${slug}`} className="grid md:grid-cols-3"><div className="h-48 md:h-36 md:col-span-1 overflow-hidden">{article.image ? <img src={article.image} alt={article.title} className="w-full h-full object-cover img-hover" /> : <div className="w-full h-full bg-slate-200" />}</div><div className="p-5 md:col-span-2 flex flex-col justify-between"><div><div className="text-xs font-medium text-slate-400">{article.source} • {new Date(article.publishedAt).toLocaleDateString()}</div><h3 className="mt-2 text-lg font-semibold">{article.title}</h3><p className="mt-2 text-sm text-slate-600 dark:text-slate-300 line-clamp-3">{article.description}</p></div><div className="mt-4 flex items-center justify-between"><div className="flex items-center gap-3"><button onClick={toggleSave} className="p-2 rounded-md border hover:bg-slate-50 dark:hover:bg-slate-900 transition"><FiBookmark className={saved? 'text-accent':''} /></button><span className="text-xs text-slate-400">Read time • 3 min</span></div><div className="flex items-center gap-2"><span className="text-xs text-slate-400 hidden sm:inline">Source: {article.source}</span><Link href={`/article/${slug}`} className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-gradient-to-r from-accent to-rose-400 text-white btn-smooth">Read <FiArrowRight/></Link></div></div></div></Link></motion.article>) }
